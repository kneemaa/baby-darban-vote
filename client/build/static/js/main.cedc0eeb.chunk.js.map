{"version":3,"sources":["pages/NoMatch/NoMatch.js","utils/api.js","components/Chart/Chart.js","components/Form/Input.js","components/Form/FormBtn.js","components/PollQuestion/PollQuestion.js","components/Form/RadioBtn.js","components/CountDownTimer/countdowntimer.js","components/Announce/Announce.js","components/Footer/Footer.js","components/List/List.js","components/List/ListItem.js","pages/Home/Home.js","index.js"],"names":["NoMatch","role","aria-label","axios","get","vote","post","reveal","Chart","CanvasJS","addColorSet","colorSet","backgroundColor","animationEnabled","theme","title","axisX","reversed","axisY","includeZero","labelFormatter","this","addSymbols","data","type","dataPoints","y","props","boys","label","girls","className","options","e","suffixes","order","Math","max","floor","log","value","length","suffix","formatNumber","pow","Component","Input","FormBtn","children","PollQuestion","state","author","gender","castVote","event","preventDefault","API","then","res","console","voteCallback","ballotCasted","catch","err","postCastedVote","target","name","setState","onCastBallot","onChange","placeholder","bind","id","onClick","CountDownTimer","Completionist","daysInHours","date","Date","now","timeLeft","renderer","days","hours","minutes","seconds","completed","Announce","prompt_class","reveal_class","showHide","disabled","src","Footer","rel","href","List","ListItem","Home","genders","winners","endTime","process","ENDTIME","loadResults","breakDownGender","Cookies","result","win","handleCastedVote","childData","set","path","getTimeLeft","entry","distance","moment","diff","map","winner","key","_id","rootElement","document","getElementById","ReactDOM","render","element"],"mappings":"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","file":"static/js/main.cedc0eeb.chunk.js","sourcesContent":["import React from \"react\";\n\nconst NoMatch = () => {\n  return(\n    <div>\n      <h1>404 Page Not Found</h1>\n      <h1>\n        <span role=\"img\" aria-label=\"Face With Rolling Eyes Emoji\">\n          ðŸ™„\n        </span>\n      </h1>\n    </div>\n  )\n}\n\nexport default NoMatch;\n","import axios from \"axios\";\n\nexport default {\n  // calls the server's /api/genders endpoint to get all the results\n  getResults: () => {\n    return axios.get(\"/api/genders\");\n  },\n  // does a POSt to the /api/vote endpoint of the server to cast a vote\n  vote: (vote) => {\n    return axios.post(\"/api/vote\", vote)\n  },\n  reveal: () => {\n    return axios.get(\"/api/reveal\")\n  },\n  findWinners: (reveal) => {\n    return axios.get(\"/api/winners/\" + reveal)\n  }\n};\n","import React, { Component } from \"react\"\nimport CanvasJSReact, {CanvasJS, CanvasJSChart} from \"canvasjs-react-charts\"\nimport \"./Chart.css\"\nclass Chart extends Component {\n  options() {\n    CanvasJS.addColorSet(\"genderShades\",\n      [//colorSet Array\n        // light-blue\n        \"#ADD8E6\", \n        // light-pink\n        \"#ffb6c1\"               \n      ]);\n\n    return {\n      colorSet: 'genderShades',\n      backgroundColor: null,\n      animationEnabled: true,\n      theme: \"dark2\",\n      title:{},\n      axisX: {\n        reversed: true,\n      },\n      axisY: {\n        includeZero: true,\n        labelFormatter: this.addSymbols\n      },\n      data: [{\n        type: \"doughnut\",\n        dataPoints: [\n          { y:  this.props.boys, label: \"Boy\" },\n          { y:  this.props.girls, label: \"Girl\" },\n        ]\n      }]\n  }\n  }\n\n  render() {\n\t\treturn (\n      <div className=\"chart\">\n        <CanvasJSChart options={this.options()} boys={this.props.boys}/>\n      </div>\n\t\t);\n\t}\n\n\taddSymbols(e){\n\t\tvar suffixes = [\"\", \"K\", \"M\", \"B\"];\n\t\tvar order = Math.max(Math.floor(Math.log(e.value) / Math.log(1000)), 0);\n\t\tif(order > suffixes.length - 1)\n\t\t\torder = suffixes.length - 1;\n\t\tvar suffix = suffixes[order];\n\t\treturn CanvasJS.formatNumber(e.value / Math.pow(1000, order)) + suffix;\n\t}\n}\n\nexport default Chart\n","import React from \"react\";\n\nexport const Input = props =>\n  <div className=\"form-group\">\n    <input className=\"form-control\" {...props} />\n  </div>;\n","import React from \"react\";\n\nexport const FormBtn = props =>\n  <button {...props} className=\"btn btn-success\">\n    {props.children}\n  </button>;\n","import React, { Component } from \"react\"\nimport { FormBtn, Input } from \"../../components/Form\"\nimport API from \"../../utils/api\"\nimport \"./PollQuestion.css\"\nimport \"../../bootstrap.css\"\n\nclass PollQuestion extends Component {\n  state = {\n    author: \"\",\n    gender: \"\"\n  }\n\n  // cast vote by sending the Post call to the server\n  castVote = event => {\n    // https://developer.mozilla.org/en-US/docs/Web/API/Event/preventDefault \n    event.preventDefault()\n\n    // if the author and gender have both been selected in the form can we cast the ballot\n    if (this.state.author && this.state.gender) {\n      API.vote({\n        gender: this.state.gender,\n        author: this.state.author\n      })\n      // good practice to have a then statement if having a .catch\n      .then(res => console.log(this.props.voteCallback({ballotCasted: true})))\n      // if there's an error, 'catch' it and console.log it\n      .catch(err => console.log(err))\n    }\n  }\n\n  // used to update the state of what the form is filled out as\n  postCastedVote = event => {\n    const { name, value } = event.target\n    this.setState({\n      [name]: value\n    })\n  }\n\n  // what to do when the formbtn is clicked\n  onCastBallot = (event) => {\n    // cast the vote function is called\n    this.castVote(event)\n    // ballotCast state is updated\n    event.preventDefault()\n  }\n\n  render() {\n    return (\n        <div className=\"grid-card\">\n          <div className=\"container alert form-wrap\">\n            <div className=\"poll-question\">\n              <h2>What gender do you think Baby Darban will be?</h2>\n              <form>\n              <label className=\"col-form-label mt-2\">\n              <Input \n                  value={this.state.author}\n                  onChange={this.postCastedVote}\n                  placeholder=\"what's your name?\"\n                  name=\"author\"\n                />\n              </label>\n              <div onChange={this.postCastedVote.bind(this)}>          \n                <input type=\"radio\" className=\"form-check-input\" id=\"optionsRadios1\" value=\"boy\" name=\"gender\" /> Boy\n                <p/>\n                <input type=\"radio\" className=\"form-check-input\" id=\"optionsRadios2\" value=\"girl\" name=\"gender\"/> Girl\n              </div>\n              <FormBtn onClick={this.onCastBallot}>Cast Vote</FormBtn>\n              </form>\n            </div>\n          </div>\n        </div>\n    )\n  }\n}\n\nexport default PollQuestion\n","import React, { Component } from \"react\"\n\nclass RadioBtn extends Component {\n\n  setGender(event) {\n    console.log(event.target.value)\n  }\n\n  render() {\n    return (\n      <div onChange={this.setGender.bind(this)}>\n        <input type=\"radio\" value=\"boy\" name=\"gender\"/> Boy\n        <input type=\"radio\" value=\"girl\" name=\"gender\"/> Girl\n      </div>\n    )\n  }\n}\n\nexport default RadioBtn\n","\nimport React from 'react'\nimport Countdown from 'react-countdown'\nimport \"./countdowntimer.css\"\n\nexport const CountDownTimer = (props) => {\n  const Completionist = () => <span>You are good to go!</span>;\n\n  // Renderer callback with condition\n  const renderer = ({ days, hours, minutes, seconds, completed }) => {\n    if (completed) {\n      // Render a completed state\n      return <Completionist />;\n    } else {\n      // Render a countdown\n      return <div className=\"count-down-timer container\">\n              <div className=\"row\">\n                <div className=\"col-sm-12 countdown-title\">\n                  <p className=\"countdown-title\"> Check back in ... </p>\n                </div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-lg-3 col-sm-1 time-labels\">\n                  <p className=\"count-down-label days\">Days</p>\n                </div>\n                <div className=\"col-lg-3 col-sm-1 time-labels\">\n                  <p className=\"count-down-label hours\">Hours</p>\n                </div>\n                <div className=\"col-lg-3 col-sm-1 time-labels\">\n                  <p className=\"count-down-label minutes\">Minutes</p>\n                </div>\n                <div className=\"col-lg-3 col-sm-1 time-labels\">\n                  <p className=\"count-down-label seconds\">Seconds</p>\n                </div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-lg-3 col-sm-3 time-values\">\n                  <p className=\"count-down-number\">{days}</p>\n                </div>\n                <div className=\"col-lg-3 col-sm-3 time-values\">\n                  <p className=\"count-down-number\">{hours}</p>\n                </div>\n                <div className=\"col-lg-3 col-sm-3 time-values\">\n                  <p className=\"count-down-number\">{minutes}</p>\n                </div>\n                <div className=\"col-lg-3 col-sm-3 time-values\">\n                  <p className=\"count-down-number\">{seconds}</p>\n                </div>\n              </div>\n            </div>\n    }\n  }\n\n  return (\n    <Countdown daysInHours={true} date={Date.now() + props.timeLeft} renderer={renderer}/>\n  )\n}\n","import React, { Component } from \"react\"\nimport \"./Announce.css\"\n\nclass Announce extends Component {\n  constructor(){\n    super()\n\n    this.state = {\n      reveal: false\n    }\n  }\n\n  showHide(){\n    this.setState({reveal: !this.state.reveal})\n  }\n\n  render() {\n    let prompt_class = this.state.reveal ? \"show-reveal\" : \"hide-reveal\"\n    let reveal_class = this.state.reveal ? \"hide-reveal\" : \"show-reveal\"\n\n    return (\n      <div className=\"container size-color\">\n        <div className=\"row announce-row\">\n          <div className=\"col-sm-12 center-body\">\n            <button type=\"button\" className={\"center-button \" + reveal_class} onClick={this.showHide.bind(this)} disabled={this.state.reveal}>\n              <span id=\"big-font\">We are having a...</span>\n              <p/>\n              <span id=\"small-font\">(click to reveal) --> <img src=\"./favicon.ico\"></img></span>\n            </button>\n            <div className={\"answer \" + prompt_class}>{this.props.reveal}!</div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Announce\n","import React from \"react\"\nimport \"./Footer.css\"\n\nexport const Footer = () => {\n  return (\n    <div className=\"footer\">\n      <h4>Arriving April 24, 2022!</h4>\n      <p>.</p><p>.</p><p>.</p>\n      <button className=\"btn btn-lg btn-link calendar-save\" type=\"button\">\n        <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://calendar.google.com/event?action=TEMPLATE&tmeid=NWVwMGZsaWhwaTJhbnRyYWM1NWdvYWYwcjcgY19sMThldWZndTBudGptbDM2ZGgzZTIxbDJia0Bn&tmsrc=c_l18eufgu0ntjml36dh3e21l2bk%40group.calendar.google.com\">Add our due date to your Google Calendar</a>\n        <p/>\n        <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://babylist.com/baby-darban\">Find our registry here</a>\n        </button>\n    </div>\n  )\n}\n","import React from \"react\";\nimport \"./List.css\";\n\nexport const List = ({ children }) => {\n  return (\n    <div className=\"list-overflow-container\">\n      <ul className=\"list-group\">\n        {children}\n      </ul>\n    </div>\n  );\n};\n","import React from \"react\";\n\nexport const ListItem = props => (\n  <li className=\"list-group-item\">\n    {props.children}\n  </li>\n);\n","import React, { Component } from \"react\"\nimport API from \"../../utils/api\"\nimport Chart from \"../../components/Chart/Chart\"\nimport PollQuestion from \"../../components/PollQuestion/PollQuestion.js\"\nimport {CountDownTimer} from \"../../components/CountDownTimer/countdowntimer\"\nimport Announce from \"../../components/Announce/Announce.js\"\nimport { Footer } from \"../../components/Footer\"\nimport { List, ListItem } from \"../../components/List\";\nimport moment from \"moment\"\nimport Cookies from 'universal-cookie'\nimport \"../../App.css\"\n\nclass Home extends Component {\n  // initialize the state with the values we want to manage\n  state = {\n    genders: [],\n    winners: [],\n    girls: 0,\n    boys: 0,\n    timeLeft: 1000,\n    gender: \"\",\n    author: \"\",\n    reveal: \"\", \n    ballotCasted: false,\n    // 5 pm on sunday\n    endTime: process.env.ENDTIME || \"2021-11-21 17:00:00\"\n  }\n\n  // when this component mounts, run these functions\n  componentDidMount() {\n    this.loadResults()\n    this.getTimeLeft()\n  };\n\n  // do the API call for getting all of the results and update state\n  loadResults = () => {\n    API.getResults()\n      .then(res => this.setState({genders: res.data}))\n      .catch(err => console.log(err))\n      // we will wait for the state to be updated then will run the breakDownGender() function\n      .then(res => this.breakDownGender())\n\n      // set a cookie that the user has cast a ballot\n      const cookies = new Cookies()\n      if (cookies.get('ballotCasted')) {\n        this.setState({ballotCasted: true})\n      }\n    \n    if (this.state.timeLeft >= 0) {\n      API.reveal()\n        .then(res => {\n          this.setState({reveal: res.data.result})\n          \n          API.findWinners(res.data.result)\n            .then(win => this.setState({winners: win.data}))\n            .catch(err => console.log(err))\n        })\n        // if there's an error, 'catch' it and console.log it\n        .catch(err => console.log(err))\n    }\n  }\n\n  // lets count the votes\n  breakDownGender() {\n    // assign the state value to a variable for easier reference below\n    const genders = this.state.genders\n\n    // iterate through each of the entries and check for the gender, anything that doesn't match will not be tallied\n    for (let entry in genders) {\n      if (genders[entry].gender === 'girl') {\n        this.setState((state) => {\n          return { girls: state.girls + 1}\n        })\n      }\n\n      if (genders[entry].gender === 'boy') {\n        this.setState((state) => {\n          return { boys: state.boys + 1}\n        })\n      }\n    }\n  }\n\n  getTimeLeft() {\n    // convert the desired end time\n    const announceTime = moment(this.state.endTime)\n    // calculate how many seconds between now and the desired end time\n    const distance = announceTime.diff(moment(), \"seconds\")\n    // put this time in the state\n    this.setState({timeLeft: distance})\n  }\n\n  // call back function for the PollQuestion component to be able to send back data for the state\n  handleCastedVote = (childData) => {\n    // update the state with the data sent back\n    this.setState(childData)\n    // request the database be reloaded to the client\n    this.loadResults()\n\n    // lets set a cookie that the ballot was cast\n    const cookies = new Cookies()\n    cookies.set('ballotCasted', {path: '/'})\n  }\n\n  // now lets render our DOM\n  render() {\n    return (\n      //main container with 3 columns/cards      \n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-sm-4 side-col\"></div>\n          <div className=\"col-sm-4 main-body\">\n                {/* ternery condition explained\n                  condition ? ifTrue : ifFalse\n                */}\n                {/* if the timeLeft in the state is equal or less than 0 move on, go to the else condition*/}\n                {this.state.timeLeft <= 0 ? (\n                  <div>\n                    {/* if the ballot HAS been cast, show the Chart Results and the Announcement\n                      If the ballot has not been cast, show the PollQuestion \n                    */}\n                    {this.state.ballotCasted ? (\n                      <div>\n                        <Announce reveal={this.state.reveal}/>\n                        <span className=\"table-title\">Who guessed right?</span>\n                        <List>\n                        {this.state.winners.map(winner => (\n                          <ListItem key={winner._id}>\n                              <strong>\n                                {winner.author}\n                              </strong>\n                          </ListItem>\n                        ))}\n                      </List>\n                      </div>\n                    ) : (<PollQuestion voteCallback={this.handleCastedVote}/>)}\n                  </div>\n                ) : (\n                  <div>\n                    {/* if the vote has been cast show the chart, otherwise show the Poll */}\n                    {!this.state.ballotCasted ? ( \n                        <PollQuestion voteCallback={this.handleCastedVote}/>\n                      ) : (\n                        <div>\n                        <CountDownTimer timeLeft={this.state.timeLeft * 1000}/>\n                        <Chart boys={this.state.boys} girls={this.state.girls}/>\n                        </div>\n                      )\n                    }\n                  </div>\n                  )\n                }\n          </div>\n          <div className=\"col-sm-4 side-col\"></div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-sm-12\">\n            <Footer/>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Home\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, Routes, Route } from \"react-router-dom\"\nimport NoMatch from \"./pages/NoMatch\"\nimport Home from \"./pages/Home\"\n\n// This is mostly boiler plate\nconst rootElement = document.getElementById('root')\nReactDOM.render(\n  <BrowserRouter>\n    <Routes>\n      {/* when anyone goes to the path \"/\" (aka home) show them the Home Page */}\n      <Route path=\"/\" element={<Home/>}/>\n      {/* when anyone goes to a path that isn't defined above, show them the 404 page */}\n      <Route path=\"*\" element={<NoMatch/>}/>\n    </Routes>\n  </BrowserRouter>,\n  rootElement\n)\n"],"sourceRoot":""}